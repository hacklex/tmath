λx. λy. f y x

$λx.\; x$

$$avg(f) := \frac{1}{n}\sum_{i=0}^n f(i)$$

$$λf.\; div\ (sum\ z\ n\ (λi.\; f\ i))\ n$$

```javascript
lst.filter(v => v > vAvg).reduce((a, l) => a + 1, 0)
```

$$reduce\ z\  \big(λa\, l.\; s\ a\big)\ \big(filter\ (λv.\; gt\ v\ vAvg)\ lst\big)$$

```
@
┝ @
│ ┝ @
│ │ ┝ reduce
│ │ ┕ z
│ ┕ λa
│   ┕ λl
│     ┕ @
│       ┝ s
│       ┕ a
┕ @
  ┝ @
  │ ┝ filter
  │ ┕ λv.
  │   ┕ @
  │     ┝ @
  │     │ ┝ gt
  │     │ ┕ v
  │     ┕ vAvg
  ┕ lst
```

```
@  @  @   reduce
@  @  @   z
@  @  λa  λl      @  s
@  @  λa  λl      @  a
@  @  @   filter
@  @  @   λv      @  @  gt
@  @  @   λv      @  @  v
@  @  @   λv      @  vAvg
@  @  lst
```

$$odd(n) = \begin{cases}
n, &n<2 \\
odd(n - 2), & n \geqslant 2
\end{cases}$$

$$\begin{aligned}
&odd(3) \xrightarrow{\;*\;} odd(1) \xrightarrow{\;*\;} 1 \\
&odd(4) \xrightarrow{\;*\;} odd(2) \xrightarrow{\;*\;} odd(0) \xrightarrow{\;*\;} 0
\end{aligned}$$

$$odd := λn.\;ite\ (lt\ n\ two)\ n\ (odd\ (sub\ n\ two))$$

$$ite(c, t, e) := \begin{cases}
t, & c = true\\
e, & c = false
\end{cases}$$

$$odd := \big(λodd.\; λn.\;ite\ (lt\ n\ two)\ n\ (odd\ (sub\ n\ two))\big)\ odd$$

$$f := λodd.\; λn.\;ite\ (lt\ n\ two)\ n\ (odd\ (sub\ n\ two))$$

$$odd := f\ odd$$

$$odd \equiv f\ odd$$

----

# Лямбда-исчисление

Построим формальное исчисление анонимных функций — лямбда исчисление.

Сначала, определим синтаксис лямбда-выражений:

$$\begin{aligned}
{\color{red}expr} ::=\ &{\color{red}var} & &\text{(имя переменной)} \\
\mid\quad &λ\, {\color{red}var}\, .\ {\color{red}expr} & &\text{(абстракция)} \\
\mid\quad &{\color{red}expr}\ {\color{red}expr} & &\text{(применение)}
\end{aligned}$$

Имя переменной может содержать более одного символа. Кроме того, мы различаем строчные буквы от заглавных: $ab$ и $aB$ это два разных имени.

Применение левоассоциативно: $\color{red} f\ v_1\ v_2$ означает $({\color{red} f\ v_1})\ {\color{red}v_2}$. Кроме того, абстракция захватывает всё, что находится справа её.

Синтаксис сам по себе это не более чем описание возможных синтаксических деревьев. Это форма без содержания, набор выражений, которому мы потом придадим смысл.

Но сначала введём следующие сокрашения:
- ${λ\color{red} v_1\, v_2}.\; \color{red}e$ означает $λ\textcolor{red}{v_1}.\;(λ\textcolor{red}{v_2}.\; \textcolor{red}{e})$.
- $λ{\color{red} v_1\,v_2\,v_3}.\; \textcolor{red}e$ означает $λ\textcolor{red}{v_1}.\;(λ\textcolor{red}{v_2}.\; (λ\textcolor{red}{v_3}.\;\textcolor{red}e))$.
- И так далее

Например, $λ x\, y.\; x$ это то же самое, что и $λx.\; λ y.\; x$.

Эти сокращения не являются частью синтаксиса: $λ x\, y.\; x$ и $λx.\; λ y.\; x$ это одно и то же выражение с одним и тем же синтаксическим деревом.

Иногда люди хотят читать выражения вслух. Вот несколько способов прочесть выражение $λx\,y.\; f\ y\ x$:

- «Лямбда икс игрек, эф от игрек от икс»
- «Лямбда икс игрек, эф от игрек икс»
- «Лямбда икс игрек, эф игрек икс»

Определившись с синтаксисом, перейдём к семантике (вкладыванию смысла). Здесь основную трудностью являются переменные.

Предназначение переменных в лямбда-выражении — указывать места для подстановки. Однако, у переменных есть имена, и это порождает проблемы. Например, что будет означать выражение $λx.\; λx.\; x$?

Чтобы решить этот вопрос, введём пару определений:

- Вхождение переменной в выражение это переменная в конкретной позиции в выражении
- Вхождение переменной при абстракции (например, $x$ в $λx.\; x$) называется *связывающим*

Кроме связывающих вхождений, бывают ещё связанные и свободные вхождения переменных. Рассмотрим их на примере следующего выражения:

$$λx.\; λy.\; f\ y\ x$$

---


