Синтаксис:

$$\begin{aligned}
expr ::=\ &var & &\text{(имя переменной)} \\
\mid\quad &“λ” \, var\ “.”\ expr & &\text{(абстракция)} \\
\mid\quad &expr\ expr & &\text{(применение)}
\end{aligned}$$

Имя переменной может содержать более одного символа: $foo$ и $bar$ это тоже корректные имена. Мы различаем строчные буквы от заглавных, то есть $ab$ и $aB$ это два разных имени.

Применение левоассоциативно: ${?f}\ {?v_1}\ {?v_2}$ означает $({?f}\ {?v_1})\ {?v_2}$. Кроме того, абстракция захватывает всё, что находится справа её.

Ещё мы будем использовать следующее сокращение: 
- $λ{?v_1}\,{?v_2}.\; ?e$ означает $λ{?v_1}.\;(λ{?v_2}.\; {?e})$.
- $λ{?v_1}\,{?v_2}\,{?v_3}.\; ?e$ означает $λ{?v_1}.\;(λ{?v_2}.\; (λ{?v_3}.\;{?e}))$.
- И так далее

Например, $λ x\, y.\; x$ это то же самое, что и $λx.\; λ y.\; x$.

Предназначение переменных — указывать места для подстановки. Однако, наличие имён
у переменных порождает проблемы. Например, что означает $λx.\; λx.\; x$?

Чтобы ответить на этот вопрос, пронумеруем переменные при абстракциях, двигаясь *вниз* по
синтаксическому дереву (при этом каждая ветвь нумеруется независимо):

$$λx^0.\; λx^1.\; x$$

Мы решаем неоднозначность следующим образом: двигаясь *вверх* по синтаксическому дереву,
находим ближайшую абстракцию с той же переменной. Таким образом, получаем:

$$λx^0.\; λx^1.\; x^1$$

Переменная $x$ оказывается связанной с внутренней абстракцией, а не внешней.

Не все переменные возможно так пронумеровать. Например:

$$λx^0.\;(λz^1.\; z^1)\ z$$

Третье вхождение переменной $z$ оказывается без номера, так как выше по синтаксическому
дереву нет никакой абстракции
с именем $z$. Такое вхождение переменной в выражении называется свободным. Остальные же
вхождения переменных в выражении называются связанными.

Переменная называется свободной в выражении $?e$, если у неё есть хотя бы одно свободное
вхождение в выражении $?e$. Выражение называется замкнутым, если все вхождения переменных
в нём являются связанными.

Смысл выражения не зависит от имён связанных переменных: $λx.\;x$ и $λt.\;t$
это по сути одно и то же выражение. Сформулируем это более строго, определив отношение
альфа-эквивалентности — равенства относительно переименования переменных.

Чтобы определить альфа-эквивалентность, потребуется пара вспомогательных определений.

Результат обмена переменных $?x$ и $?y$ в выражении $?t$ (пишется $(?x\ ?y) \cdot {?t}$) это выражение, определённое следующим образом:

- Если $?t$ это переменная, то
    - Если имена $?t$ и $?x$ совпадают, то результатом является переменная $?y$
    - Если имена $?t$ и $?y$ совпадают, то результатом является $?x$
    - Иначе $?t$ остаётся неизменным
- Если $?t$ это применение $?f\ ?a$, то результатом является $\{(?x\ ?y) \cdot {?f}\}\ \{(?x\ ?y) \cdot {?a}\}$
- Если $?t$ это абстракция $λ?v.\;?e$, то результат это $\lambda \{(?x\ ?y) \cdot {?v}\}.\; \{(?x\ ?y) \cdot{?e}\}$

Например, $(x\ y) \cdot λx.\; x\ y\ z$ это $λy.\; y\ x\ z$.

Мы говорим, что переменная $?x$ является свежей в выражении $?e$ (пишется $?x \mathbin{\#} {?e}$) если эта переменная не встречается в выражении $?e$. Например, в выражении $λx.\; y\ x$ переменные $z$ и $t$ являются свежимм, когда же переменные $x$ и $y$ -- не являются.

Наконец, мы определяем альфа-эквивалентность с помощью следующих правил вывода:

- Любая переменная $?v$ эквивалентная самой себе
$$\frac{}{{?v} =_α {?v}}$$
- Применения эквивалентны, если эквивалентны их части
$$\frac{?f_1 =_α {?f_2} \qquad?a_1 =_α {?a_2}}{({?f_1}\ ?a_1) =_α ({?f_2}\ ?a_2)}$$
- Абстракции эквивалентны, если можно переименовать переменные так, чтобы выражения
внутри абстракций были эквивалентны
$$\frac{?y \mathbin\# {?e_1} \qquad ?y \mathbin\# {?e_2} \qquad (?x_1\ ?y)\cdot {?e_1} =_α (?x_2\ ?y)\cdot {?e_2}} {(λ\, ?x_1.\; ?e_1) =_α (λ\, ?x_2.\;?e_2)}$$

Например, покажем что $(λx.\; λx.\; x) =_\alpha (λa.\; λb.\; b)$:

1. Чтобы вывести $(λx.\; λx.\; x) =_\alpha (λa.\; λb.\; b)$, достаточно вывести $(x\ t)\cdot (λx.\; x) =_\alpha (a\ t)\cdot (λb.\; b)$
2. Чтобы вывести $(λt.\; t) =_\alpha (λb.\; b)$, достаточно вывести $(v\ t)\cdot t =_\alpha (v\ b)\cdot b$
3. $v =_\alpha v$

Проблемы, связанные с наличием имён у переменных не ограничиваются повторяющимися
именами. Например, рассмотрим выражение:

$$λz.\; (λf.\;λz.\; f\ z)\ z$$

Если вычислять наивно подставляя $z$ на место $f$, то результатом будет

$$λz.\; λz.\; z\ z$$

Обе переменные оказываются связанными со внутренней абстракцией. Этот результат грубо
противоречит принципу, что имена связанных переменных не важны! Действительно, вычисление
эквивалентного выражения даёт иной результат:

$$(λa.\; (λb.\;λc.\; b\ c)\ a) \leadsto (λa.\;λc.\;a\ c)$$

Чтобы решить эту проблему, посмотрим непосредственно на вычисляемую часть выражения:

$$(λf.\;λz.\; f\ z)\ z$$

В этом выражении переменная $z$ является *свободной.* Однако, наивная подстановка даёт выражение
$λz.\;z\ z$ — выражение, в котором $z$ становится связанной. Проблема возникает из-за
того, что имя свободной переменной совпадает с именем связанной.

Поэтому непосредственно перед подстановкой все связанные переменные, имена которых совпадают
с именами свободных переменных в подставляемом выражении, должны быть переименованы.

Мы будем обозначать подстановку выражения $?v$ в выражение $?e$ на место переменной $?x$ как
${?e}[{?x} := {?v}]$. При этом мы считаем, что перестановка также делает все необходимые
переименование переменных.

Например, результатом $(λz.\; f\ z)[f := z]$ является $λt.\; z\ t$.

Бета-редукция:

$$\frac{}{(λ?x.\;?e)\ ?v \leadsto {?e}[{?x := {?v}}]}$$

Структурные правила: 
$$\frac{?f_1 \leadsto {?f_2}}{{?f_1}\ {?a} \leadsto {?f_2}\ {?a}} \qquad
\frac{?a_1 \leadsto {?a_2}}{{?f}\ {?a_1} \leadsto {?f}\ {?a_2}} \qquad
\frac{?e_1 \leadsto {?e_2}}{(λ?x.\;?e_1) \leadsto (λ?x.\; {?e_2})}$$

Эта-редукция:

$$\frac{}{(λ?x.\; {?f}\ {?x}) \leadsto {?f}}$$
